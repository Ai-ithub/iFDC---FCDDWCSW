
# مستندسازی اسکریپت شناسایی و پردازش نقاط پرت

این اسکریپت برای شناسایی و پردازش داده‌های پرت در مجموعه داده‌های آسیب‌های چاه نفت طراحی شده است. شناسایی نقاط پرت با استفاده از روش IQR (Interquartile Range) انجام می‌شود و سپس با استفاده از دو روش "حذف" یا "اصلاح" مقادیر، داده‌ها پاک‌سازی می‌شوند.

## 📁 فایل‌ها

- **ورودی**: `formation_damage_optimized.parquet`  
  - فایل اولیه حاوی داده‌های خام.
  
- **خروجی (گزارش نقاط پرت)**: `outliers_report.parquet`  
  - گزارشی شامل رکوردهایی که به عنوان نقاط پرت شناسایی شده‌اند.
  
- **خروجی (داده‌های پاک‌سازی‌شده)**: `formation_damage_cleaned.parquet`  
  - داده‌ها پس از حذف یا اصلاح نقاط پرت.

---

## ⚙️ تنظیمات و پارامترها

- **COLUMNS_TO_CHECK**: فهرست ستون‌هایی که برای شناسایی نقاط پرت بررسی می‌شوند.
- **ACTION**: نوع پردازش نقاط پرت. دو گزینه وجود دارد:
  - `'clip'`: اصلاح مقادیر پرت با استفاده از مرزهای تعیین‌شده.
  - `'remove'`: حذف رکوردهای دارای نقاط پرت.
- **IQR_THRESHOLD**: ضریبی که برای تعیین محدوده‌های پایین و بالای نقاط پرت استفاده می‌شود (معمولاً 1.5).

---

## 📌 مراحل اصلی اجرای اسکریپت

1. **شناسایی نقاط پرت**: با استفاده از روش IQR، نقاط پرت برای هر ستون بررسی می‌شوند.
2. **تولید گزارش نقاط پرت**: یک گزارش از رکوردهای دارای نقاط پرت ایجاد می‌شود و در فایل خروجی ذخیره می‌شود.
3. **پردازش نقاط پرت**: بسته به تنظیمات انتخاب‌شده، نقاط پرت یا اصلاح می‌شوند (clip) یا حذف می‌شوند (remove).
4. **ذخیره داده‌ها**: داده‌های پاک‌سازی‌شده در یک فایل جدید ذخیره می‌شوند.

---

## 🚀 نمونه خروجی

در زمان اجرای اسکریپت، پیامی مشابه زیر نمایش داده می‌شود:

```text
[STATUS] Dataset loaded with 5,000 records
[SUCCESS] Outlier report saved to 'outliers_report.parquet'
[SUCCESS] Cleaned dataset saved to 'formation_damage_cleaned.parquet'
[SAMPLE CHANGES] Example modifications:
Temperature_C (Well W-101):
  Original: 145.00 → Cleaned: 130.00
  Upper bound: 130.00
[SUMMARY] Initial records: 5,000
          Outliers detected: 120
          Final records: 5,000
```

---

## ✅ نکات و مزایا

- **انتخاب روش پردازش**: به کاربران این امکان را می‌دهد که تصمیم بگیرند که نقاط پرت اصلاح شوند یا حذف شوند.
- **بهینه‌سازی حافظه**: پس از پردازش، نوع داده‌ها برای ستون‌های خاص به `category` تغییر می‌کند که مصرف حافظه را بهبود می‌بخشد.
