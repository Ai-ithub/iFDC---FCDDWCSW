
# مستندسازی اسکریپت شناسایی و پردازش ترکیب‌های نامعتبر

این اسکریپت برای شناسایی و پردازش ترکیب‌های نامعتبر در داده‌های مربوط به آسیب‌های چاه نفت طراحی شده است. این ترکیب‌ها با توجه به شرایط خاص برای ستون‌های مختلف شناسایی می‌شوند و بسته به درصد ترکیب‌های نامعتبر، اقداماتی برای پردازش داده‌ها انجام می‌شود.

## 📁 فایل‌ها

- **ورودی**: `formation_damage_cleaned.parquet`  
  - فایل داده‌های پاک‌سازی‌شده اولیه.
  
- **خروجی (داده‌های معتبر)**: `formation_damage_valid_data.parquet`  
  - داده‌ها پس از حذف یا اصلاح ترکیب‌های نامعتبر.

- **خروجی (ترکیب‌های نامعتبر)**: `invalid_rows.csv`  
  - در صورت نیاز به تحقیقات بیشتر، ردیف‌های دارای ترکیب نامعتبر در این فایل ذخیره می‌شوند.

---

## ⚙️ تنظیمات و پارامترها

- **ترکیب‌های نامعتبر**: مجموعه‌ای از شرایط که برای شناسایی ترکیب‌های نامعتبر در داده‌ها استفاده می‌شوند:
  - ترکیب‌های مختلف بین ستون‌های `Formation`، `Fluid_Type` و `Completion_Type` که ترکیب‌های غیرمجاز را شناسایی می‌کنند.
  
---

## 📌 مراحل اصلی اجرای اسکریپت

1. **شناسایی ترکیب‌های نامعتبر**: با استفاده از شرایط مشخص‌شده، ترکیب‌های نامعتبر در داده‌ها شناسایی می‌شوند.
2. **محاسبه درصد ترکیب‌های نامعتبر**: درصد ردیف‌های دارای ترکیب نامعتبر محاسبه می‌شود.
3. **تصمیم‌گیری بر اساس درصد ترکیب‌های نامعتبر**:
   - اگر درصد کمتر از 1% باشد، به مسئله توجه نمی‌شود.
   - اگر بین 1% تا 5% باشد، ردیف‌های نامعتبر حذف می‌شوند.
   - اگر بین 5% تا 10% باشد، توصیه به تحقیقات بیشتر می‌شود و ردیف‌های نامعتبر در فایل جداگانه ذخیره می‌شوند.
   - اگر بیشتر از 10% باشد، هشدار داده می‌شود که ممکن است نیاز به بازنگری در جمع‌آوری داده‌ها باشد.
4. **ذخیره داده‌ها**: داده‌های معتبر در یک فایل جدید ذخیره می‌شوند.

---

## 🚀 نمونه خروجی

در زمان اجرای اسکریپت، پیامی مشابه زیر نمایش داده می‌شود:

```text
Percentage of invalid combinations: 3.01%
Invalid combinations are between 1% and 5%, removing invalid rows.
Removed 150 invalid rows.
[SUCCESS] Cleaned data saved to 'formation_damage_valid_data.parquet'
```

---

## ✅ نکات و مزایا

- **تصمیم‌گیری خودکار**: بسته به درصد ترکیب‌های نامعتبر، تصمیم‌گیری خودکار برای پردازش داده‌ها انجام می‌شود.
- **توصیه به تحقیقات بیشتر**: اگر درصد ترکیب‌های نامعتبر بین 5% تا 10% باشد، به تحقیقات بیشتر توصیه می‌شود.
- **حفظ داده‌های نامعتبر برای بررسی**: ردیف‌های نامعتبر در فایل‌های جداگانه ذخیره می‌شوند تا امکان بررسی بیشتر وجود داشته باشد.
